â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         DEPLOYMENT INSTRUCTIONS - READ THIS FIRST         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ QUICK DEPLOY - Run these commands on your server:

1. Connect to server:
   ssh omar@192.168.75.20

2. Navigate to project:
   cd ~/OMARINO-EMS-Suite

3. Pull latest code:
   git pull origin main

4. Run deployment script:
   ./deploy-all.sh

That's it! The script will:
âœ… Verify database schema
âœ… Deploy forecast service
âœ… Deploy optimize service  
âœ… Deploy webapp
âœ… Run health checks
âœ… Show verification commands

â±ï¸  Estimated time: 5-7 minutes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ WHAT'S BEING DEPLOYED

âœ¨ New Feature: Database Persistence for Forecasts & Optimizations

Services Updated:
â€¢ forecast-service  â†’ Saves all forecasts to PostgreSQL
â€¢ optimize-service  â†’ Saves all optimizations to PostgreSQL
â€¢ webapp            â†’ Displays forecast/optimization history

Database:
â€¢ 6 new tables (2 TimescaleDB hypertables)
â€¢ Already applied to omarino-postgres container

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VERIFICATION

After deployment, verify everything works:

1. Check services are running:
   docker ps | grep omarino

2. Test forecast API:
   curl https://ems-back.omarino.net/api/forecast/forecasts | jq '.'

3. Test optimization API:
   curl https://ems-back.omarino.net/api/optimize/optimizations | jq '.'

4. Open webapp:
   https://ems-demo.omarino.net/forecasts
   https://ems-demo.omarino.net/optimization

5. Check database:
   docker exec omarino-postgres psql -U omarino -d omarino \
     -c "SELECT COUNT(*) FROM forecast_jobs;"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ†˜ TROUBLESHOOTING

If something goes wrong:

1. Check service logs:
   docker logs omarino-forecast --tail 50
   docker logs omarino-optimize --tail 50
   docker logs omarino-webapp --tail 50

2. Verify database connection:
   docker logs omarino-forecast | grep database_connected
   docker logs omarino-optimize | grep database_connected

3. Check network:
   docker network inspect ems_omarino-network

4. Restart a service:
   docker restart omarino-forecast
   docker restart omarino-optimize
   docker restart omarino-webapp

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DETAILED DOCUMENTATION

For more information, see:
â€¢ DEPLOYMENT_GUIDE.md  â†’ Full deployment guide
â€¢ QUICK_REFERENCE.md   â†’ Quick commands & API reference

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ KEY FEATURES AFTER DEPLOYMENT

Forecast Page (https://ems-demo.omarino.net/forecasts):
â€¢ View all saved forecasts
â€¢ Click to see detailed forecast with chart
â€¢ Shows forecast metrics (MAE, RMSE, MAPE)
â€¢ Confidence intervals (5th and 95th percentile)
â€¢ Auto-refresh every 10 seconds

Optimization Page (https://ems-demo.omarino.net/optimization):
â€¢ View all saved optimizations
â€¢ Click to see detailed results
â€¢ Battery schedule chart (SOC, charge, discharge)
â€¢ Grid schedule chart (import, export)
â€¢ Cost breakdown visualization
â€¢ Auto-refresh every 10 seconds

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”’ IMPORTANT NOTES

â€¢ All services use non-blocking database saves
â€¢ Services continue working even if database is unavailable
â€¢ Old forecast/optimization behavior unchanged
â€¢ New data automatically appears in UI
â€¢ Database uses TimescaleDB for time-series optimization

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ready to deploy? Run:
    ssh omar@192.168.75.20
    cd ~/OMARINO-EMS-Suite
    git pull origin main
    ./deploy-all.sh

Good luck! ğŸ‰
